"use strict";(self.webpackChunklinkwell_nodes_documentation=self.webpackChunklinkwell_nodes_documentation||[]).push([[7713],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),d=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(l.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=d(n),h=r,m=c["".concat(l,".").concat(h)]||c[h]||u[h]||o;return n?a.createElement(m,i(i({ref:t},p),{},{components:n})):a.createElement(m,i({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:r,i[1]=s;for(var d=2;d<o;d++)i[d]=n[d];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},1378:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var a=n(7462),r=(n(7294),n(3905));const o={title:"Retrieving TheRundown sports data using Chainlink",description:"Code examples for writing TheRundown (sports betting) data to your smart contract using a Chainlink oracle request (custom data feed)."},i="Retrieving TheRundown sports data using Chainlink",s={unversionedId:"services/direct-request-jobs/examples/sports-data/TheRundown",id:"services/direct-request-jobs/examples/sports-data/TheRundown",title:"Retrieving TheRundown sports data using Chainlink",description:"Code examples for writing TheRundown (sports betting) data to your smart contract using a Chainlink oracle request (custom data feed).",source:"@site/docs/services/direct-request-jobs/examples/sports-data/TheRundown.md",sourceDirName:"services/direct-request-jobs/examples/sports-data",slug:"/services/direct-request-jobs/examples/sports-data/TheRundown",permalink:"/services/direct-request-jobs/examples/sports-data/TheRundown",draft:!1,tags:[],version:"current",frontMatter:{title:"Retrieving TheRundown sports data using Chainlink",description:"Code examples for writing TheRundown (sports betting) data to your smart contract using a Chainlink oracle request (custom data feed)."},sidebar:"docsSidebar",previous:{title:"Retrieving SportsDataIO sports data using Chainlink",permalink:"/services/direct-request-jobs/examples/sports-data/SportsDataIO"},next:{title:"Data Feed Pricing",permalink:"/services/direct-request-jobs/Pricing"}},l={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Writing sports / betting data from TheRundown to your blockchain smart contract",id:"writing-sports--betting-data-from-therundown-to-your-blockchain-smart-contract",level:2},{value:"1. Create a TheRundown API key",id:"1-create-a-therundown-api-key",level:3},{value:"2. Design your consumer contract",id:"2-design-your-consumer-contract",level:3},{value:"2a. Add the constructor:",id:"2a-add-the-constructor",level:4},{value:"2b. Add your request function (example):",id:"2b-add-your-request-function-example",level:4},{value:"2c. Retrieve the response (example):",id:"2c-retrieve-the-response-example",level:4},{value:"Need to protect your API key?",id:"need-to-protect-your-api-key",level:3},{value:"Simulating the above request logic",id:"simulating-the-above-request-logic",level:2},{value:"1. <strong>Send the HTTP request</strong>:",id:"1-send-the-http-request",level:4},{value:"2. <strong>Analyze the response</strong>:",id:"2-analyze-the-response",level:4},{value:"3. <strong>Apply the JSON path</strong>:",id:"3-apply-the-json-path",level:4},{value:"4. <strong>Apply the multiplier</strong>:",id:"4-apply-the-multiplier",level:4},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Still need more help?",id:"still-need-more-help",level:2}],p={toc:d},c="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(c,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"retrieving-therundown-sports-data-using-chainlink"},"Retrieving TheRundown sports data using Chainlink"),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"TheRundown is the leading platform for real-time odds, scores, betting data, stats, and unrivaled insights into the sports betting marketplace. Through their API, developers can access a vast array of data across various sports, including ",(0,r.kt)("strong",{parentName:"p"},"football (NFL)"),", ",(0,r.kt)("strong",{parentName:"p"},"basketball (NBA)"),", ",(0,r.kt)("strong",{parentName:"p"},"baseball (MLB)"),", ",(0,r.kt)("strong",{parentName:"p"},"hockey (NHL)"),", ",(0,r.kt)("strong",{parentName:"p"},"cricket (IPL)"),", ",(0,r.kt)("strong",{parentName:"p"},"fighting (UFC)"),", ",(0,r.kt)("strong",{parentName:"p"},"soccer (MLS)"),", and more. This data encompasses live scores, real-time odds, player statistics, team information, and historical data, among other aspects of sports analytics. By catering to the needs of sports enthusiasts, fantasy sports platforms, and professional analytics teams, TheRundown has established itself as an invaluable resource in the sports tech industry."),(0,r.kt)("p",null,"The following guide illustrates an easy example of how to retrieve a ",(0,r.kt)("inlineCode",{parentName:"p"},"uint256[]")," (unsigned 256-bit integer array) value from TheRundown API, and write it to your blockchain smart contract using our highly-resilient Chainlink oracle infrastructure."),(0,r.kt)("h2",{id:"writing-sports--betting-data-from-therundown-to-your-blockchain-smart-contract"},"Writing sports / betting data from TheRundown to your blockchain smart contract"),(0,r.kt)("p",null,"Accessing TheRundown data from within your blockchain contract or Web3 application is as simple as:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Purchasing an API key for the TheRundown through the ",(0,r.kt)("a",{parentName:"li",href:"https://rapidapi.com/therundown/api/therundown/pricing"},"RapidAPI website"),"."),(0,r.kt)("li",{parentName:"ol"},"Deploying the following Chainlink consumer contract onto the ERC-20 blockchain network of your choice. ")),(0,r.kt)("p",null,"Below we'll walk you through the steps necessary to implement such a solution."),(0,r.kt)("h3",{id:"1-create-a-therundown-api-key"},"1. Create a TheRundown API key"),(0,r.kt)("p",null,"In order to retrieve data from the TheRundown API, you'll need to purchase an API key from RapidAPI. "),(0,r.kt)("p",null,"You may request a API key for accessing TheRundown data here on through the ",(0,r.kt)("a",{parentName:"p",href:"https://rapidapi.com/therundown/api/therundown/pricing"},"RapidAPI website"),"."),(0,r.kt)("h3",{id:"2-design-your-consumer-contract"},"2. Design your consumer contract"),(0,r.kt)("p",null,"Add the following sample code to your ",(0,r.kt)("strong",{parentName:"p"},"consumer contract"),"."),(0,r.kt)("h4",{id:"2a-add-the-constructor"},"2a. Add the constructor:"),(0,r.kt)("p",null,"The constructor specifies important information about the request destination and payment for your request. ",(0,r.kt)("strong",{parentName:"p"},"Important"),": This information varies by chain, oracle, and job: "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol",metastring:"reference",reference:!0},"https://github.com/LinkWellNodes/Documentation/blob/main/docs/services/direct-request-jobs/examples/sports-data/TheRundown.sol#L23-L32\n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"You'll need to replace ",(0,r.kt)("inlineCode",{parentName:"p"},"ADD_CHAINLINK_TOKEN_ADDRESS_HERE"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"ADD_ORACLE_ADDRESS_HERE"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"ADD_JOB_ID_HERE")," with the values appropriate to the specific blockchain network and job that you'll be using. You can find these values within our ",(0,r.kt)("a",{parentName:"p",href:"/services/direct-request-jobs/Jobs-and-Pricing"},"Direct Request Job Documentation"),". Chainlink token addresses can be found ",(0,r.kt)("a",{parentName:"p",href:"https://docs.chain.link/resources/link-token-contracts"},"here"),".")),(0,r.kt)("h4",{id:"2b-add-your-request-function-example"},"2b. Add your request function (example):"),(0,r.kt)("p",null,"The 'request' function defines the request parameters and sends the request to the Chainlink oracle. For detailed information on each required parameter, reference the above '",(0,r.kt)("strong",{parentName:"p"},"Request parameters"),"' section:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol",metastring:"reference",reference:!0},"https://github.com/LinkWellNodes/Documentation/blob/main/docs/services/direct-request-jobs/examples/sports-data/TheRundown.sol#L34-L55\n")),(0,r.kt)("h4",{id:"2c-retrieve-the-response-example"},"2c. Retrieve the response (example):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol",metastring:"reference",reference:!0},"https://github.com/LinkWellNodes/Documentation/blob/main/docs/services/direct-request-jobs/examples/sports-data/TheRundown.sol#L57-L65\n")),(0,r.kt)("h3",{id:"need-to-protect-your-api-key"},"Need to protect your API key?"),(0,r.kt)("admonition",{type:"danger"},(0,r.kt)("p",{parentName:"admonition"},"Data entered into a smart contract is visible to the general public.")),(0,r.kt)("p",null,"If you'd like to protect your API key from being broadcast on-chain, you can instead store this information off-chain on our secure infrastructure. Please fill out our ",(0,r.kt)("a",{parentName:"p",href:"https://linkwellnodes.io/Getting-Started.html"},"Request Survey")," to get started - once we receive your information, we'll provide you with a custom job ID that will send your API key safely along with your request."),(0,r.kt)("h2",{id:"simulating-the-above-request-logic"},"Simulating the above request logic"),(0,r.kt)("p",null,"Let's walk through each step of the above ",(0,r.kt)("strong",{parentName:"p"},"sample request"),", to better understand how it all works together:"),(0,r.kt)("h4",{id:"1-send-the-http-request"},"1. ",(0,r.kt)("strong",{parentName:"h4"},"Send the HTTP request"),":"),(0,r.kt)("p",null,"The following ",(0,r.kt)("inlineCode",{parentName:"p"},"curl")," command simulates the same HTTP request that our Chainlink node makes shortly after you trigger the ",(0,r.kt)("inlineCode",{parentName:"p"},"request()")," function within your consumer contract:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'curl -k -X GET -H "X-RapidAPI-Host: therundown-therundown-v1.p.rapidapi.com" -H "X-RapidAPI-Key: {your_api_key}" "https://therundown-therundown-v1.p.rapidapi.com/events/9a35b8986a76eaaea364be331cb453ec" \n')),(0,r.kt)("h4",{id:"2-analyze-the-response"},"2. ",(0,r.kt)("strong",{parentName:"h4"},"Analyze the response"),":"),(0,r.kt)("p",null,"The following is a sample response body returned to our Chainlink node by the above HTTP request (abbreviated for clarity):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n   "event_id":"9a35b8986a76eaaea364be331cb453ec",\n   "sport_id":2,\n   "event_date":"2020-02-02T23:30:00Z",\n   "rotation_number_away":101,\n   "rotation_number_home":102,\n   "score":{\n      "event_id":"9a35b8986a76eaaea364be331cb453ec",\n      "event_status":"STATUS_FINAL",\n      "winner_away":0,\n      "winner_home":1,\n      "score_away":20,\n      "score_home":31,\n      "score_away_by_period":[\n         3,\n         7,\n         10,\n         0\n      ],\n      "score_home_by_period":[\n         7,\n         3,\n         0,\n         21\n      ],\n      "venue_name":"Hard Rock Stadium",\n      "venue_location":"Miami Gardens, FL",\n      "game_clock":0,\n      "display_clock":"0.00",\n      "game_period":4,\n      "broadcast":"FOX",\n      "event_status_detail":"Final",\n      "updated_at":"2020-02-03T03:13:48Z"\n   },\n   "teams":[\n      {\n         "team_id":2928,\n         "team_normalized_id":91,\n         "name":"San Francisco 49ers",\n         "is_away":true,\n         "is_home":false\n      },\n      {\n         "team_id":2929,\n         "team_normalized_id":74,\n         "name":"Kansas City Chiefs",\n         "is_away":false,\n         "is_home":true\n      }\n   ],\n   "teams_normalized":[\n      {\n         "team_id":91,\n         "name":"San Francisco",\n         "mascot":"49ers",\n         "abbreviation":"SF",\n         "conference_id":34,\n         "division_id":14,\n         "ranking":0,\n         "record":"5-3",\n         "is_away":true,\n         "is_home":false,\n         "conference":{\n            "conference_id":34,\n            "sport_id":2,\n            "name":"National Football Conference"\n         },\n         "division":{\n            "division_id":14,\n            "conference_id":34,\n            "sport_id":2,\n            "name":"NFC West"\n         }\n      },\n      {\n         "team_id":74,\n         "name":"Kansas City",\n         "mascot":"Chiefs",\n         "abbreviation":"KC",\n         "conference_id":33,\n         "division_id":10,\n         "ranking":0,\n         "record":"7-2",\n         "is_away":false,\n         "is_home":true,\n         "conference":{\n            "conference_id":33,\n            "sport_id":2,\n            "name":"American Football Conference"\n         },\n         "division":{\n            "division_id":10,\n            "conference_id":33,\n            "sport_id":2,\n            "name":"AFC West"\n         }\n      }\n   ],\n   "schedule":{\n      "league_name":"National Football League",\n      "conference_competition":false,\n      "season_type":"Postseason",\n      "season_year":2019,\n      "week":5,\n      "week_name":"Super Bowl",\n      "week_detail":"Feb 3-9",\n      "event_headline":"SUPER BOWL LIV",\n      "event_name":"SUPER BOWL LIV - San Francisco at Kansas City - 2020-02-02",\n      "attendance":"62417"\n   },\n   "lines":{\n      "3":{\n         "line_id":10405033,\n         "moneyline":{\n            "moneyline_away":0.0001,\n            "moneyline_away_delta":0.0001,\n            "moneyline_home":0.0001,\n            "moneyline_home_delta":0.0001,\n            "moneyline_draw":0.0001,\n            "moneyline_draw_delta":0.0001,\n            "line_id":10405033,\n            "event_id":"9a35b8986a76eaaea364be331cb453ec",\n            "sport_id":2,\n            "affiliate_id":3,\n            "date_updated":"2023-11-11T03:25:12Z",\n            "format":"American"\n         },\n         "spread":{\n            "point_spread_away":0.0001,\n            "point_spread_home":0.0001,\n            "point_spread_away_delta":0.0001,\n            "point_spread_home_delta":0.0001,\n            "point_spread_away_money":0.0001,\n            "point_spread_away_money_delta":0.0001,\n            "point_spread_home_money":0.0001,\n            "point_spread_home_money_delta":0.0001,\n            "line_id":10405033,\n            "event_id":"9a35b8986a76eaaea364be331cb453ec",\n            "sport_id":2,\n            "affiliate_id":3,\n            "date_updated":"2023-11-11T03:25:12Z",\n            "format":"American"\n         },\n         "total":{\n            "total_over":0.0001,\n            "total_over_delta":0.0001,\n            "total_under":0.0001,\n            "total_under_delta":0.0001,\n            "total_over_money":0.0001,\n            "total_over_money_delta":0.0001,\n            "total_under_money":0.0001,\n            "total_under_money_delta":0.0001,\n            "line_id":10405033,\n            "event_id":"9a35b8986a76eaaea364be331cb453ec",\n            "sport_id":2,\n            "affiliate_id":3,\n            "date_updated":"2023-11-11T03:25:12Z",\n            "format":"American"\n         },\n         "affiliate":{\n            "affiliate_id":3,\n            "affiliate_name":"Pinnacle",\n            "affiliate_url":"https://www.pinnacle.com/en/rtn"\n         }\n      }\n   }\n}\n')),(0,r.kt)("h4",{id:"3-apply-the-json-path"},"3. ",(0,r.kt)("strong",{parentName:"h4"},"Apply the JSON path"),":"),(0,r.kt)("p",null,"After receiving the above sample response, our Chainlink node will attempt to filter the result by the provided complex ",(0,r.kt)("inlineCode",{parentName:"p"},"path")," parameter value (",(0,r.kt)("inlineCode",{parentName:"p"},"score,score_away;score,score_home"),"). After applying the provided path (which consists of two JSON paths), we get the following two results:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"20, 31\n")),(0,r.kt)("h4",{id:"4-apply-the-multiplier"},"4. ",(0,r.kt)("strong",{parentName:"h4"},"Apply the multiplier"),":"),(0,r.kt)("p",null,"After filtering the sample response by the provided JSON path, our Chainlink node will multiply each result by the provided ",(0,r.kt)("inlineCode",{parentName:"p"},"multiplier")," parameter value (",(0,r.kt)("inlineCode",{parentName:"p"},"1"),"). After applying this multiplier, we get the following value, which is ultimately written to your smart contract as a ",(0,r.kt)("inlineCode",{parentName:"p"},"uint256[]")," object by our Chainlink oracle:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[20, 31]\n")),(0,r.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,r.kt)("p",null,"Having trouble with your request? Check our ",(0,r.kt)("a",{parentName:"p",href:"/knowledgebase/faq/Chainlink-Users#custom-data-feeds"},"Custom Data Feeds FAQ"),"."),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"This job has a configured gas limit of ",(0,r.kt)("strong",{parentName:"p"},"1,000,000")," for writing your result on-chain. If your transaction isn't returning any value after more than 60 seconds of waiting, use the appropriate block explorer to navigate to the '",(0,r.kt)("strong",{parentName:"p"},"Oracle Address"),"' you entered into your consumer contract for this job to see if any recent transaction(s) have failed due to an '",(0,r.kt)("strong",{parentName:"p"},"out of gas"),"' error. If so, you'll need to either A) Return a smaller response, B) Split your request into multiple oracle transactions, or C) Contact us to request a higher gas allowance for your specific use case (may result in higher job pricing). ")),(0,r.kt)("h2",{id:"still-need-more-help"},"Still need more help?"),(0,r.kt)("p",null,"Please reach out to us in ",(0,r.kt)("a",{parentName:"p",href:"https://discord.gg/Xs6SjqVPUA"},"Discord")," if you require additional assistance with this request."))}u.isMDXComponent=!0}}]);